<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />

		<title>SCEditor Demo</title>

		<link rel="stylesheet" href="minified/themes/default.min.css" id="theme-style" />
		  
		<script src="minified/sceditor.min.js"></script>
		<script src="minified/icons/monocons.js"></script>
		<script src="minified/formats/bbcode.js"></script>

		<style>
			html {
				font-family: Arial, Helvetica, sans-serif;
				font-size: 13px;
			}
			form div {
				padding: .5em;
			}
			code:before {
				position: absolute;
				content: 'Code:';
				top: -1.35em;
				left: 0;
			}
			code {
				margin-top: 1.5em;
				position: relative;
				background: #eee;
				border: 1px solid #aaa;
				white-space: pre;
				padding: .25em;
				min-height: 1.25em;
			}
			code:before, code {
				display: block;
				text-align: left;
			}
			.test-bbcode {
				border: gray 1px solid;
				padding: 10px;
			}
		</style>
	</head>
	<body>
		<form action="" id="bb-code-test" method="post">
			<div>
				<textarea id="example" name="test" style="height:300px;width:600px;">[center][size=3][b]BBCode SCEditor[/b][/size][/center]

Give it a try! :)

[color=#ff00]Red text! [/color][color=#3399ff]Blue?[/color]

[ul][li]A simple list[/li][li]list item 2[/li][/ul]

Just type [b]:[/b]) and it should be converted into :) as you type.</textarea>

			</div>

			<div>
				<label for="theme">Theme:</label>
				<select id="theme">
					<option value="default">Default</option>
					<option value="defaultdark">Default dark</option>
					<option value="modern">Modern</option>
					<option value="office-toolbar">Office Toolbar</option>
					<option value="office">Office</option>
					<option value="square">Square</option>
				</select>
			</div>
			<button id="validate">valider</button>
		</form>

		<div class="test-bbcode" id="display-text"></div>
		<div class="test-bbcode" id="display-test"></div>
		<div class="test-bbcode" id="display-html"></div>
		<div class="test-bbcode" id="display-test-0"></div>
		<div class="test-bbcode" id="display-html-0"></div>


		<script>
			var textarea = document.getElementById('example');
			sceditor.create(textarea, {
				format: 'bbcode',
				icons: 'monocons',
				style: 'minified/themes/content/default.min.css'
			});


			var themeInput = document.getElementById('theme');
			themeInput.onchange = function() {
				var theme = 'minified/themes/' + themeInput.value + '.min.css';

				document.getElementById('theme-style').href = theme;
			};
		</script>

		<p>SCEditor is licensed under the <a href="http://www.opensource.org/licenses/mit-license.php">MIT</a></p>
	
		<script src="./../../../src/js/le_fetch.js"></script>
		<script>
			document.getElementById("validate").addEventListener("click", function(event) {
				// pour ne pas prendre l'adresse de l'action du formulaire.
				event.preventDefault();
			let doc0 = document.querySelector("iframe").contentDocument;
			let origine0 = doc0.body.innerHTML;
			console.log("0001");
				/* envoyer les informations du message sur la page php a partir d'un formulaire */
   fetch_form("./test_bbcode_to_html.php", "bb-code-test").then(function (
      response
    ) {
        /* si c'est bon, on recupere le tableau des valeurs de la liste des messages */

        if (response.split("[##HTML##]")[0] == "true") {
			console.log("0001");
			let doc = document.querySelector("iframe").contentDocument;
			document.getElementById("display-text").innerHTML = response.split("[##HTML##]")[1];
			document.getElementById("display-test").innerHTML = response.split("[##HTML##]")[2];
			let html = response.split("[##HTML##]")[2].replaceAll("<", "&lt;").replaceAll(">", "&gt;").replaceAll("\n", "<br />");
			document.getElementById("display-html").innerHTML = html;
			let origine = doc.body.innerHTML;
			document.getElementById("display-test-0").innerHTML = origine;
			console.log();
			document.getElementById("display-html-0").innerHTML = origine.replaceAll("<", "&lt;").replaceAll(">", "&gt;").replaceAll("\n", "<br />");

        } else {
            alert(response);
        }
    });

			})
		</script>
	</body>
</html>
